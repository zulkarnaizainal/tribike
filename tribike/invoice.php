<?php require 'includes/db.php'; require 'includes/auth.php'; if (session_status()==PHP_SESSION_NONE) session_start(); require_login(); $user=current_user($pdo); if(!isset($_GET['id'])){ echo 'Invoice id required'; exit; } $id=(int)$_GET['id']; $stmt=$pdo->prepare('SELECT i.*, u.name AS user_name, b.model AS bike_model FROM invoices i LEFT JOIN users u ON u.id=i.user_id LEFT JOIN bookings bk ON bk.id=i.booking_id LEFT JOIN bikes b ON b.id=bk.bike_id WHERE i.id=? LIMIT 1'); $stmt->execute([$id]); $inv=$stmt->fetch(); if(!$inv){ echo 'Not found'; exit; } ?><!doctype html><html><head><meta charset="utf-8"><title>Invoice #<?=$inv['id']?> - Tribike</title><link rel="stylesheet" href="assets/style.css"></head><body><div class="container"><h2>Invoice #<?=$inv['id']?></h2><p><strong>User:</strong> <?=htmlspecialchars($inv['user_name'])?></p><p><strong>Bike:</strong> <?=htmlspecialchars($inv['bike_model']?:'-')?></p><p><strong>Amount:</strong> <?=number_format($inv['amount'],2)?></p><p><strong>Status:</strong> <?=htmlspecialchars($inv['status'])?></p><p><a href="javascript:window.print()">Print Invoice</a></p><p><a href="invoices.php">Back</a></p></div></body></html>