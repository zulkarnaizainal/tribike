<?php require 'includes/db.php'; require 'includes/auth.php'; if (session_status()==PHP_SESSION_NONE) session_start(); require_login(); $user=current_user($pdo); $error=''; $success=''; if ($_SERVER['REQUEST_METHOD']==='POST'){ $name=trim($_POST['name']??$user['name']); $email=trim($_POST['email']??$user['email']); if($name && $email){ $stmt=$pdo->prepare('UPDATE users SET name=?,email=? WHERE id=?'); $stmt->execute([$name,$email,$user['id']]); $success='Profile updated'; $user=current_user($pdo);} else $error='Name and email required'; } ?><!doctype html><html><head><meta charset="utf-8"><title>Profile - Tribike</title><link rel="stylesheet" href="assets/style.css"></head><body><div class="container"><h2>My Profile</h2><?php if($error):?><p class="error"><?=htmlspecialchars($error)?></p><?php endif;?><?php if($success):?><p class="success"><?=htmlspecialchars($success)?></p><?php endif;?><form method="post"><label>Name<br><input name="name" value="<?=htmlspecialchars($user['name'])?>" required></label><br><label>Email<br><input type="email" name="email" value="<?=htmlspecialchars($user['email'])?>" required></label><br><button type="submit">Save</button></form><p><a href="index.php">Back</a></p></div></body></html>